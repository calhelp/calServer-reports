<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 7.0.2.final using JasperReports Library version 6.20.6  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="field-names-language-overview" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="4d5a6f91-09f9-4f53-9df3-8196c8a7a011">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="CalHelp Data Adapter"/>
	<property name="net.sf.jasperreports.print.create.bookmarks" value="true"/>
	<parameter name="SchemaName" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="LanguageCode" class="java.lang.String">
		<defaultValueExpression><![CDATA["de"]]></defaultValueExpression>
	</parameter>
	<parameter name="PrefixTable" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="ReportVersion" class="java.lang.String">
		<defaultValueExpression><![CDATA["v1.0"]]></defaultValueExpression>
	</parameter>
	<parameter name="TableList" class="java.lang.String">
		<defaultValueExpression><![CDATA["customers, inventory, calibration, location, repair, tickets, booking, article"]]></defaultValueExpression>
	</parameter>
	<queryString language="SQL">
		<![CDATA[SELECT
  fc.table_name,
  fc.column_name,
  fc.field_type,
  fc.edit_mandatory,
  COALESCE(m1.language_code, m2.language_code) AS language_code,
  COALESCE(m1.message_to,   m2.message_to)     AS translation_label,
  COALESCE(m1.tooltip,      m2.tooltip)        AS translation_hint
FROM $P!{PrefixTable}field_configuration fc

/* 1) Exakter Key: table.column */
LEFT JOIN $P!{PrefixTable}messages m1
  ON m1.message_from = CONCAT(fc.table_name, '.', fc.column_name)
 AND (
       COALESCE($P{LanguageCode},'') = ''
    OR LOWER(REPLACE(m1.language_code,'-','_')) = LOWER(REPLACE($P{LanguageCode},'-','_'))
    OR LOWER(m1.language_code) LIKE CONCAT(LOWER($P{LanguageCode}), '%')
 )

/* 2) Fallback: nur column */
LEFT JOIN $P!{PrefixTable}messages m2
  ON m2.message_from = fc.column_name
 AND (
       COALESCE($P{LanguageCode},'') = ''
    OR LOWER(REPLACE(m2.language_code,'-','_')) = LOWER(REPLACE($P{LanguageCode},'-','_'))
    OR LOWER(m2.language_code) LIKE CONCAT(LOWER($P{LanguageCode}), '%')
 )

WHERE
  /* Optional: alter Prefix-Filter (beibehalten, falls genutzt) */
  (COALESCE($P{SchemaName}, '') = '' OR fc.table_name LIKE CONCAT($P{SchemaName}, '%'))
  /* NEU: CSV-Tabellenliste, case-insensitiv; entfernt nur Komma-Leerzeichen */
  AND (
    COALESCE($P{TableList}, '') = ''
    OR FIND_IN_SET(
         LOWER(fc.table_name),
         REPLACE(LOWER($P{TableList}), ', ', ',')
       ) > 0
  )
ORDER BY fc.table_name, fc.column_name]]>
	</queryString>
	<field name="table_name" class="java.lang.String"/>
	<field name="column_name" class="java.lang.String"/>
	<field name="field_type" class="java.lang.String"/>
	<field name="edit_mandatory" class="java.lang.Integer"/>
	<field name="language_code" class="java.lang.String"/>
	<field name="translation_label" class="java.lang.String"/>
	<field name="translation_hint" class="java.lang.String"/>
	<group name="TableGroup">
		<groupExpression><![CDATA[$F{table_name}]]></groupExpression>
		<groupHeader>
			<band height="32">
				<textField textAdjust="StretchHeight">
					<reportElement x="0" y="6" width="555" height="24" uuid="69a703ae-a3af-4f48-8a3f-5c7c598cecf5"/>
					<textElement>
						<font size="14" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{table_name} == null ? "(Unbekannte Tabelle)" : $F{table_name}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<title>
		<band height="98">
			<staticText>
				<reportElement x="0" y="0" width="360" height="24" uuid="6601c03a-af0a-4b8d-bc61-227e545d66b8"/>
				<textElement>
					<font size="18" isBold="true"/>
				</textElement>
				<text><![CDATA[Feld- & Sprachübersicht]]></text>
			</staticText>
			<textField>
				<reportElement x="0" y="32" width="360" height="18" uuid="ee239cf6-17d1-4a54-9be6-88c072f4414a"/>
				<textElement>
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA["Schema/Filter: " + ($P{SchemaName} == null || $P{SchemaName}.isEmpty() ? "(alle)" : $P{SchemaName})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="52" width="360" height="18" uuid="ce8a01dc-7cde-4a14-903a-9f7be6f8c1f2"/>
				<textElement>
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA["Sprache: " + ($P{LanguageCode} == null || $P{LanguageCode}.isEmpty() ? "(alle)" : $P{LanguageCode})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="72" width="360" height="18" uuid="f0b4a5e3-2f96-4a89-9a2b-4d2f6fc6f0a3"/>
				<textElement>
					<font size="10" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Tabellenliste: " + ($P{TableList} == null || $P{TableList}.isEmpty() ? "(alle)" : $P{TableList})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="400" y="0" width="135" height="18" uuid="2350c9ac-3c03-49fb-9e04-f417ded7c6bc"/>
				<textElement textAlignment="Right">
					<font size="9" isItalic="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Version " + $P{ReportVersion}]]></textFieldExpression>
			</textField>
			<textField pattern="dd.MM.yyyy HH:mm">
				<reportElement x="400" y="20" width="135" height="18" uuid="5c41f89b-555a-4f43-a128-0ea09fed3c1f"/>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="24">
			<frame>
				<reportElement x="0" y="0" width="555" height="24" uuid="46129e07-0989-46ef-b8a1-6bd8d7d6c3a9"/>
				<box>
					<bottomPen lineWidth="0.5"/>
				</box>
				<staticText>
					<reportElement x="0" y="4" width="110" height="16" uuid="f3e368e4-f970-493b-9832-a3caec53b41b"/>
					<textElement>
						<font size="10" isBold="true"/>
					</textElement>
					<text><![CDATA[Feld]]></text>
				</staticText>
				<staticText>
					<reportElement x="110" y="4" width="240" height="16" uuid="6134d94f-16bf-4152-8ad0-b9fb88429efe"/>
					<textElement>
						<font size="10" isBold="true"/>
					</textElement>
					<text><![CDATA[Übersetzung]]></text>
				</staticText>
				<staticText>
					<reportElement x="350" y="4" width="70" height="16" uuid="da06ebe6-cffc-448d-8a6f-b556c7a6990e"/>
					<textElement>
						<font size="10" isBold="true"/>
					</textElement>
					<text><![CDATA[Datentyp]]></text>
				</staticText>
				<staticText>
					<reportElement x="420" y="4" width="50" height="16" uuid="4de7c4d9-b6d3-4ca1-ad4b-a351ca82a42d"/>
					<textElement textAlignment="Center">
						<font size="10" isBold="true"/>
					</textElement>
					<text><![CDATA[Pflicht]]></text>
				</staticText>
				<staticText>
					<reportElement x="470" y="4" width="85" height="16" uuid="9c763896-d996-4a6c-9a4e-751ce901ddc6"/>
					<textElement>
						<font size="10" isBold="true"/>
					</textElement>
					<text><![CDATA[Hinweis]]></text>
				</staticText>
			</frame>
		</band>
	</pageHeader>
	<detail>
		<band height="48" splitType="Stretch">
			<frame>
				<reportElement stretchType="ElementGroupHeight" x="0" y="0" width="555" height="48" uuid="69ff56d8-b64a-4552-9e72-83a8749d41f8"/>
				<box>
					<bottomPen lineWidth="0.2" lineStyle="Dotted"/>
				</box>
				<textField textAdjust="StretchHeight">
					<reportElement x="0" y="4" width="110" height="16" uuid="d0a6a546-d2d0-47dd-a798-59492607db8f"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{column_name} == null || $F{column_name}.isEmpty()
  ? "(Unbekannte Spalte)"
  : $F{column_name}]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement x="110" y="4" width="240" height="16" uuid="c1a523af-38d0-46c0-934e-0a1e68832f31"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{translation_label} != null && !$F{translation_label}.isEmpty()
  ? $F{translation_label}
  : "(keine Übersetzung)"]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="350" y="4" width="70" height="16" uuid="9adcc709-33fb-48d9-8698-e5b66d1bd1a1"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{field_type}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="420" y="4" width="50" height="16" uuid="fd48e7b9-3d9f-4bb0-bc74-2df4f65a9f1d"/>
					<textElement textAlignment="Center">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{edit_mandatory} == null
  ? ""
  : (java.lang.Integer.valueOf(1).equals($F{edit_mandatory}) ? "Ja" : "Nein")]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement x="470" y="4" width="85" height="16" uuid="1991fde8-ff16-4f28-b3fe-0b5ff8b17aea"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{translation_hint} != null && !$F{translation_hint}.isEmpty()
  ? $F{translation_hint}
  : ""]]></textFieldExpression>
				</textField>
			</frame>
		</band>
	</detail>
	<columnFooter>
		<band height="12"/>
	</columnFooter>
	<pageFooter>
		<band height="16">
			<textField>
				<reportElement x="0" y="0" width="520" height="16" uuid="df5c2da4-8c0c-4259-8cc2-9ba1e7f19d22"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Seite " + $V{PAGE_NUMBER} + " / "]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="520" y="0" width="35" height="16" uuid="c3d6a5a8-2e58-4a6c-9a1c-1d7b8b6a8d01"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="24">
			<textField>
				<reportElement x="0" y="0" width="555" height="20" uuid="0f9e4c14-e45b-4f24-8d1b-de9b3e3d33ac"/>
				<textElement>
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA["Anzahl Felder: " + $V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
